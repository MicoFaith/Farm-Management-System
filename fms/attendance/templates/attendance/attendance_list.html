{% extends 'base.html' %} {% block content %}
<div class="container mt-4">
  <h2>Attendance Records</h2>

  <form method="get" class="mb-4">
    <div class="row">
      <div class="col-auto">
        <input
          type="date"
          class="form-control"
          name="date"
          value="{{ date|date:'Y-m-d' }}"
        />
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-primary">View Date</button>
      </div>
      <div class="col-auto">
        <a href="{% url 'mark_attendance' %}" class="btn btn-success"
          >Mark Attendance</a
        >
      </div>
    </div>
  </form>

  <table class="table">
    <thead>
      <tr>
        <th>Farmer Name</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for record in farmer_attendance %}
      <tr>
        <td>{{ record.farmer.name }}</td>
        <td>
          {% if record.present == None %}
          <span class="badge bg-secondary">Not Marked</span>
          {% elif record.present %}
          <span class="badge bg-success">Present</span>
          {% else %}
          <span class="badge bg-danger">Absent</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="2" class="text-center">No records found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
